package require tcltest 2.2
namespace import -force ::tcltest::*

eval ::tcltest::configure $argv

#
# The following allows us to use ADP without a connection.
#

#ns_adp_ctl channel stdout
#
#
#If you;re writing a test and the output is the same with your result,
#don't forget that the result must end in the accolades without a space between them

# Testing tag/htmltag
test bhtml-1.1 {Basic bhtml tag example} -setup {
    ns_register_proc GET /bhtml-1.1 {
		set bhtml [bhtml new]
		set return [$bhtml tag div "This is a test!"]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-1.1
} -cleanup {
    ns_unregister_op GET /bhtml-1.1
} -result {200 {<div>This is a test!</div>}}

test bhtml-1.2 { bhtml tag without closing tag } -setup {
    ns_register_proc GET /bhtml-1.2 {
		set bhtml [bhtml new]
		set return [$bhtml tag -closingTag 0 -htmlOptions [list value "" name firstname type text] input]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-1.2
} -cleanup {
    ns_unregister_op GET /bhtml-1.2
} -result {200 {<input value="" name="firstname" type="text" />}}


test bhtml-1.3 { bthml test single quotes } -setup {
    ns_register_proc GET /bhtml-1.3 {
		set bhtml [bhtml new]
		set return [$bhtml tag -closingTag 0 -singlequote 1 -htmlOptions [list value "" name firstname type text] input]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-1.3
} -cleanup {
    ns_unregister_op GET /bhtml-1.3
} -result {200 {<input value='' name='firstname' type='text' />}}


#Alert
test bhtml-2.1 { alert label test} -setup {
    ns_register_proc GET /bhtml-2.1 {
		set bhtml [bhtml new]
		set return [$bhtml alert "Howdy friend!"]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-2.1
} -cleanup {
    ns_unregister_op GET /bhtml-2.1
} -result {200 {<div class="alert alert-info"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>	Howdy friend!</div>}}

test bhtml-2.2 { alert warning type with extra class} -setup {
    ns_register_proc GET /bhtml-2.2 {
		set bhtml [bhtml new]
		set return [$bhtml alert -type warning -class login "You need to login to edit this page!"]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-2.2
} -cleanup {
    ns_unregister_op GET /bhtml-2.2
} -result {200 {<div class="alert alert-warning"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>	You need to login to edit this page!</div>}}

test bhtml-2.3 {Jumbotron testing} -setup {
    ns_register_proc GET /bhtml-2.3 {
		set bhtml [bhtml new]
		set return [$bhtml jumbotron "The allnew LostMVC" "A once in a lifetime opportunity!"]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-2.3
} -cleanup {
    ns_unregister_op GET /bhtml-2.3
} -result {200 {<div class="jumbotron"><h1>The allnew LostMVC</h1> A once in a lifetime opportunity!</div>}}

test bhtml-2.4 {Breadcrumb generation, this also tests if lists work!} -setup {
    ns_register_proc GET /bhtml-2.4 {
		set bhtml [bhtml new]
		set title "The 100 year war."
		set breadcrumb [subst {{-url 1 {Home} "/"}
						 {-url 1 {History} /history/index}
						 {-url 1 {Europe} /history/europe/index}
						 {-active 1 "$title"}
		}]
		set return [$bhtml breadcrumb $breadcrumb]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-2.4
} -cleanup {
    ns_unregister_op GET /bhtml-2.4
} -result {200 {<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="/history/index">History</a></li><li><a href="/history/europe/index">Europe</a></li><li class="active">The 100 year war.</li></ol>}}

test bhtml-2.5 {Blockquote in reverse} -setup {
    ns_register_proc GET /bhtml-2.5 {
		set bhtml [bhtml new]
		set return [$bhtml blockquote -reverse 1 -source "United Brain Power"  "A simple yet efficient framework"]
		ns_return 200 text/html $return
    }
} -body {
    nstest::http -getbody 1  GET /bhtml-2.5
} -cleanup {
    ns_unregister_op GET /bhtml-2.5
} -result {200 {<blockquote class="blockquote-reverse">A simple yet efficient framework<footer>United Brain Power</footer></blockquote>}}

#Desc testing

#MakeGroup tests

#MakeList Tests

#Tables tests


cleanupTests
